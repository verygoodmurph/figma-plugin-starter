<head>
  <!-- Google fonts embed -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">


  <!-- Inline styles -->
  <style>
    /* Custom colors */
    :root {
      --surface: #ffffff;
      --on-surface: #000000;
    }

    /* Light mode overrides */
    html.figma-light {
      --surface: #ffffff;
      --on-surface: #000000;
    }

    /* Dark mode overrides */
    html.figma-dark {
      --surface: #000000;
      --on-surface: #ffffff;
    }

    body {
      background-color: var(--figma-color-bg);
      color: var(--figma-color-text);
      margin: 0;
      padding: 16px;
      display: grid;
      grid-template-rows: 1fr auto;
    }

    body * {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", system,
        sans-serif;
      font-size: 16px;
      font-weight: 400;
    }

    body *:focus,
    body *:focus-visible {
      outline: 2px solid var(--figma-color-border-component-hover);
      -webkit-box-shadow: none;
      box-shadow: none;
    }

    p {
      margin: 0;
      padding: 0;
      font-size: 16px;
      font-weight: 400;
    }

    p.small {
      font-size: 12px;
      color: var(--figma-color-text-secondary);
    }

    p.code {
      font-family: 'Monaco', 'Menlo', monospace;
      color: var(--figma-color-text-tertiary);
    }

    p span {
      font-weight: 600;
      color: var(--figma-color-text-brand);
    }

    p span.callout {
      font-family: 'Instrument Serif', serif;
      font-weight: 400;
      font-size: 1.5em;
    }

    button {
      border: none;
      border-radius: 4px;
      padding: 8px 16px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      background-color: var(--figma-color-bg-brand);
      color: var(--figma-color-text);
      transition: background-color 0.33s ease-in-out, color 0.33s ease-in-out;
    }

    button:hover {
      background-color: var(--figma-color-bg-brand-hover);
    }

    button.subtle {
      background-color: var(--figma-color-bg);
      color: var(--figma-color-text-secondary);
    }

    button.subtle:hover {
      background-color: var(--figma-color-bg-secondary);
      color: var(--figma-color-text-secondary-hover);
    }

    hr {
      width: 100%;
      border-width: 0.25px;
      border-color: var(--figma-color-border);
    }

    .row {
      display: grid;
      gap: 8px;
    }
  </style>
</head>

<body>
  <div class="content">
    <div class="row">
      <p class="small code">
        Open dev console <br/>(Plugins > Development > Show/hide console)
      </p>
      <hr class="dotted" />
      <p class="small">Select a layer</p>
      <p>I'm a <span id="pluginData" class="callout">...</span> object</p>
    </div>
  </div>

  <div class="actions">
    <button id="actionButton">Run</button>
    <button id="closeButton" class="subtle">Close</button>
  </div>

  <!-- Figma plugin UI script -->
  <script>
    // Get UI elements
    const pluginData = document.getElementById("pluginData");
    const actionButton = document.getElementById("actionButton");
    const closeButton = document.getElementById("closeButton");

    // Listen for selection data from the plugin
    window.onmessage = (event) => {
      // Get the message from the plugin
      const message = event.data.pluginMessage;

      // Check if the message is of type "pluginData"
      if (message.type === "selectionData") {
        // Update the UI with the received data
        pluginData.innerText = message.data;
      }
    };

    // Run action
    document.getElementById("actionButton").onclick = async () => {
      parent.postMessage({ pluginMessage: { type: "runAction" } }, "*");
    };

    // Close plugin
    document.getElementById("closeButton").onclick = async () => {
      parent.postMessage({ pluginMessage: { type: "closePlugin" } }, "*");
    };
  </script>
</body>